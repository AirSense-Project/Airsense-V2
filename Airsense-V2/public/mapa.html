<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AirSense - Visor Geoespacial</title>

    <!-- LibrerÃ­a Leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Estilos CSS -->
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <!-- ========================= HEADER ========================= -->
    <header class="header" role="banner" aria-label="Encabezado principal del visor geoespacial">
      <div class="header__contenido">
        <h1 class="header__titulo" id="titulo-sitio">ğŸŒ AirSense</h1>
        
        <!-- BotÃ³n de modo oscuro -->
        <button
          id="btnModoOscuro"
          class="btn-modo-oscuro"
          aria-label="Alternar entre modo claro y modo oscuro"
          aria-pressed="false"
        >
          <span class="icono-sol" aria-hidden="true">â˜€ï¸</span>
          <span class="icono-luna" aria-hidden="true">ğŸŒ™</span>
        </button>
      </div>
    </header>

    <!-- ========================= CONTENIDO PRINCIPAL ========================= -->
    <main role="main">
      <div class="contenedor">
        <h1 id="titulo-principal">ğŸ—ºï¸ Visor geoespacial sobre la calidad del aire</h1>

        <!-- ========================= FILTROS ========================= -->
        <div class="filtros-contenedor" role="search" aria-labelledby="titulo-filtros">
          <h2 id="titulo-filtros" class="sr-only">Filtros de bÃºsqueda del mapa</h2>

          <!-- Filtro de municipio -->
          <div class="filtro-item">
            <label for="selectMunicipio">ğŸ“ Municipio:</label>
            <select id="selectMunicipio" class="selector-municipio">
              <option value="">-- Selecciona --</option>
            </select>
          </div>

          <!-- Filtro de aÃ±o -->
          <div class="filtro-item">
            <label for="selectAnio">ğŸ“… AÃ±o:</label>
            <select id="selectAnio" class="selector-municipio" disabled>
              <option value="">-- Primero selecciona municipio --</option>
            </select>
          </div>

          <!-- Filtro de estaciÃ³n -->
          <div class="filtro-item">
            <label for="selectEstacion">ğŸ­ EstaciÃ³n:</label>
            <select id="selectEstacion" class="selector-municipio" disabled>
              <option value="">-- Primero selecciona aÃ±o --</option>
            </select>
          </div>

          <!-- Filtro de contaminante -->
          <div class="filtro-item">
            <label for="selectContaminante">âš—ï¸ Contaminante:</label>
            <select id="selectContaminante" class="selector-municipio" disabled>
              <option value="">-- Primero selecciona aÃ±o --</option>
            </select>
          </div>

          <!-- BotÃ³n limpiar -->
          <div class="filtro-item filtro-item--boton">
            <label aria-hidden="true">&nbsp;</label>
            <button 
              id="btnLimpiarFiltros" 
              class="btn-limpiar-filtros"
              title="Limpiar todos los filtros"
              aria-label="Limpiar todos los filtros y reiniciar el mapa"
            >
              ğŸ—‘ï¸ Limpiar
            </button>
          </div>
        </div>

        <!-- ========================= VISTA PRINCIPAL ========================= -->
        <div class="vista-principal">

          <!-- Panel lateral izquierdo -->
          <aside 
            class="panel-informacion" 
            role="region" 
            aria-labelledby="titulo-instrucciones"
          >
            <div id="informacionContaminantes" class="panel-instrucciones">
              <h2 id="titulo-instrucciones">CÃ³mo usar la aplicaciÃ³n ğŸŒ</h2>
              <p>
                Explora 13 aÃ±os de datos histÃ³ricos (2011-2023) de calidad del aire en el Valle del Cauca.
              </p>

              <ol class="pasos" aria-label="Instrucciones de uso del mapa">
                <li>ğŸ“ Selecciona un <b>municipio</b> del Valle del Cauca</li>
                <li>ğŸ¯ Haz <b>clic en una estaciÃ³n</b> de monitoreo</li>
                <li>ğŸ§ª Escoge un <b>contaminante</b> atmosfÃ©rico</li>
                <li>ğŸ“Š Consulta <b>datos y lÃ­mites OMS</b></li>
              </ol>
            </div>
          </aside>

          <!-- Mapa principal -->
          <div class="vista-principal__mapa">
            <div 
              id="estadoMapa" 
              class="estado-mapa" 
              role="status" 
              aria-live="polite"
            ></div>

            <div 
              id="map" 
              class="mapa" 
              role="application" 
              aria-label="Mapa interactivo de calidad del aire en el Valle del Cauca"
            ></div>
          </div>

          <!-- Panel derecho: Diccionario -->
          <aside 
            id="diccionario" 
            class="panel-diccionario" 
            role="region" 
            aria-labelledby="titulo-diccionario"
          >
            <h2 id="titulo-diccionario">Diccionario de Contaminantes</h2>
            
            <div 
              id="vistaLista" 
              class="diccionario__vista diccionario__vista--activa" 
              aria-hidden="false"
            >
              <div class="diccionario__leyenda-compacta">
                <h5>ğŸ“Š Calidad del Aire (OMS 2021)</h5>
                <div class="leyenda-compacta__grid">
                  <div><span class="leyenda-color-buena"></span> Buena</div>
                  <div><span class="leyenda-color-moderada"></span> Moderada</div>
                  <div><span class="leyenda-color-mala"></span> Mala</div>
                </div>
              </div>

              <p class="diccionario__intro">
                Explora los principales contaminantes atmosfÃ©ricos monitoreados en el Valle del Cauca.
              </p>
              <ul id="listaContaminantes" class="diccionario__lista" aria-label="Lista de contaminantes atmosfÃ©ricos"></ul>
            </div>

            <div id="vistaDetalle" class="diccionario__vista" aria-hidden="true">
              <button 
                id="btnVolver" 
                class="diccionario__btn-volver" 
                aria-label="Volver a la lista de contaminantes"
              >
                â† Volver
              </button>
              <article id="contenidoDetalle" class="diccionario__detalle"></article>
            </div>
          </aside>
        </div>
      </div>
    </main>

    <!-- ========================= SCRIPTS ========================= -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="apiClient.js" defer></script>
    <script src="script.js" defer></script>
    <script src="diccionario.js" defer></script>
  </body>
</html>
